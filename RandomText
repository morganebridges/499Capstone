  @PersistenceContext  private EntityManager em;  public void clearHibernateCache() {      Session s =
 em.getDelegate();      SessionFactory sf = s.getSessionFactory();         Map classMetadata = sf.getAllClassMetadata();      for (EntityPersister ep : classMetadata.values()) {          if (ep.hasCache()) {              sf.evictEntity(ep.getCache().getRegionName());          }      }         Map collMetadata = sf.getAllCollectionMetadata();      for (AbstractCollectionPersister acp : collMetadata.values()) {          if (acp.hasCache()) {              sf.evictCollection(acp.getCache().getRegionName());          }      }         return;  }
